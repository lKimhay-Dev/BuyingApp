{"version":3,"file":"month.component.js","sources":["month.component.js"],"names":[],"mappings":"AAAA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iCAMO;AACP;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;oBAAuB;AACvB;AACA;AACA;AACA","sourcesContent":["\"use strict\";\r\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n};\r\nvar __metadata = (this && this.__metadata) || function (k, v) {\r\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(k, v);\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar core_1 = require(\"@angular/core\");\r\nvar forms_1 = require(\"@angular/forms\");\r\nvar calendar_model_1 = require(\"../calendar.model\");\r\nvar config_1 = require(\"../config\");\r\nexports.MONTH_VALUE_ACCESSOR = {\r\n    provide: forms_1.NG_VALUE_ACCESSOR,\r\n    useExisting: core_1.forwardRef(function () { return MonthComponent; }),\r\n    multi: true\r\n};\r\nvar MonthComponent = /** @class */ (function () {\r\n    function MonthComponent(ref) {\r\n        this.ref = ref;\r\n        this.readonly = false;\r\n        this.color = config_1.defaults.COLOR;\r\n        this.onChange = new core_1.EventEmitter();\r\n        this.onSelect = new core_1.EventEmitter();\r\n        this.onSelectStart = new core_1.EventEmitter();\r\n        this.onSelectEnd = new core_1.EventEmitter();\r\n        this._date = [null, null];\r\n        this._isInit = false;\r\n    }\r\n    Object.defineProperty(MonthComponent.prototype, \"_isRange\", {\r\n        get: function () {\r\n            return this.pickMode === config_1.pickModes.RANGE;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    MonthComponent.prototype.ngAfterViewInit = function () {\r\n        this._isInit = true;\r\n    };\r\n    MonthComponent.prototype.writeValue = function (obj) {\r\n        if (Array.isArray(obj)) {\r\n            this._date = obj;\r\n        }\r\n    };\r\n    MonthComponent.prototype.registerOnChange = function (fn) {\r\n        this._onChanged = fn;\r\n    };\r\n    MonthComponent.prototype.registerOnTouched = function (fn) {\r\n        this._onTouched = fn;\r\n    };\r\n    MonthComponent.prototype.trackByTime = function (index, item) {\r\n        return item ? item.time : index;\r\n    };\r\n    MonthComponent.prototype.isEndSelection = function (day) {\r\n        if (!day)\r\n            return false;\r\n        if (this.pickMode !== config_1.pickModes.RANGE || !this._isInit || this._date[1] === null) {\r\n            return false;\r\n        }\r\n        return this._date[1].time === day.time;\r\n    };\r\n    MonthComponent.prototype.isBetween = function (day) {\r\n        if (!day)\r\n            return false;\r\n        if (this.pickMode !== config_1.pickModes.RANGE || !this._isInit) {\r\n            return false;\r\n        }\r\n        if (this._date[0] === null || this._date[1] === null) {\r\n            return false;\r\n        }\r\n        var start = this._date[0].time;\r\n        var end = this._date[1].time;\r\n        return day.time < end && day.time > start;\r\n    };\r\n    MonthComponent.prototype.isStartSelection = function (day) {\r\n        if (!day)\r\n            return false;\r\n        if (this.pickMode !== config_1.pickModes.RANGE || !this._isInit || this._date[0] === null) {\r\n            return false;\r\n        }\r\n        return this._date[0].time === day.time && this._date[1] !== null;\r\n    };\r\n    MonthComponent.prototype.isSelected = function (time) {\r\n        if (Array.isArray(this._date)) {\r\n            if (this.pickMode !== config_1.pickModes.MULTI) {\r\n                if (this._date[0] !== null) {\r\n                    return time === this._date[0].time;\r\n                }\r\n                if (this._date[1] !== null) {\r\n                    return time === this._date[1].time;\r\n                }\r\n            }\r\n            else {\r\n                return this._date.findIndex(function (e) { return e !== null && e.time === time; }) !== -1;\r\n            }\r\n        }\r\n        else {\r\n            return false;\r\n        }\r\n    };\r\n    MonthComponent.prototype.onSelected = function (item) {\r\n        if (this.readonly)\r\n            return;\r\n        item.selected = true;\r\n        this.onSelect.emit(item);\r\n        if (this.pickMode === config_1.pickModes.SINGLE) {\r\n            this._date[0] = item;\r\n            this.onChange.emit(this._date);\r\n            return;\r\n        }\r\n        if (this.pickMode === config_1.pickModes.RANGE) {\r\n            if (this._date[0] === null) {\r\n                this._date[0] = item;\r\n                this.onSelectStart.emit(item);\r\n            }\r\n            else if (this._date[1] === null) {\r\n                if (this._date[0].time < item.time) {\r\n                    this._date[1] = item;\r\n                    this.onSelectEnd.emit(item);\r\n                }\r\n                else {\r\n                    this._date[1] = this._date[0];\r\n                    this.onSelectEnd.emit(this._date[0]);\r\n                    this._date[0] = item;\r\n                    this.onSelectStart.emit(item);\r\n                }\r\n            }\r\n            else {\r\n                this._date[0] = item;\r\n                this.onSelectStart.emit(item);\r\n                this._date[1] = null;\r\n            }\r\n            this.onChange.emit(this._date);\r\n            return;\r\n        }\r\n        if (this.pickMode === config_1.pickModes.MULTI) {\r\n            var index = this._date.findIndex(function (e) { return e !== null && e.time === item.time; });\r\n            if (index === -1) {\r\n                this._date.push(item);\r\n            }\r\n            else {\r\n                this._date.splice(index, 1);\r\n            }\r\n            this.onChange.emit(this._date.filter(function (e) { return e !== null; }));\r\n        }\r\n    };\r\n    __decorate([\r\n        core_1.Input(),\r\n        __metadata(\"design:type\", calendar_model_1.CalendarMonth)\r\n    ], MonthComponent.prototype, \"month\", void 0);\r\n    __decorate([\r\n        core_1.Input(),\r\n        __metadata(\"design:type\", String)\r\n    ], MonthComponent.prototype, \"pickMode\", void 0);\r\n    __decorate([\r\n        core_1.Input(),\r\n        __metadata(\"design:type\", Boolean)\r\n    ], MonthComponent.prototype, \"isSaveHistory\", void 0);\r\n    __decorate([\r\n        core_1.Input(),\r\n        __metadata(\"design:type\", Object)\r\n    ], MonthComponent.prototype, \"id\", void 0);\r\n    __decorate([\r\n        core_1.Input(),\r\n        __metadata(\"design:type\", Object)\r\n    ], MonthComponent.prototype, \"readonly\", void 0);\r\n    __decorate([\r\n        core_1.Input(),\r\n        __metadata(\"design:type\", String)\r\n    ], MonthComponent.prototype, \"color\", void 0);\r\n    __decorate([\r\n        core_1.Output(),\r\n        __metadata(\"design:type\", core_1.EventEmitter)\r\n    ], MonthComponent.prototype, \"onChange\", void 0);\r\n    __decorate([\r\n        core_1.Output(),\r\n        __metadata(\"design:type\", core_1.EventEmitter)\r\n    ], MonthComponent.prototype, \"onSelect\", void 0);\r\n    __decorate([\r\n        core_1.Output(),\r\n        __metadata(\"design:type\", core_1.EventEmitter)\r\n    ], MonthComponent.prototype, \"onSelectStart\", void 0);\r\n    __decorate([\r\n        core_1.Output(),\r\n        __metadata(\"design:type\", core_1.EventEmitter)\r\n    ], MonthComponent.prototype, \"onSelectEnd\", void 0);\r\n    MonthComponent = __decorate([\r\n        core_1.Component({\r\n            selector: 'ion-calendar-month',\r\n            providers: [exports.MONTH_VALUE_ACCESSOR],\r\n            template: \"\\n    <div [class]=\\\"color\\\">\\n      <ng-template [ngIf]=\\\"!_isRange\\\" [ngIfElse]=\\\"rangeBox\\\">\\n        <div class=\\\"days-box\\\">\\n          <ng-template ngFor let-day [ngForOf]=\\\"month.days\\\" [ngForTrackBy]=\\\"trackByTime\\\">\\n            <div class=\\\"days\\\">\\n              <ng-container *ngIf=\\\"day\\\">\\n                <button type='button'\\n                        [class]=\\\"'days-btn ' + day.cssClass\\\"\\n                        [class.today]=\\\"day.isToday\\\"\\n                        (click)=\\\"onSelected(day)\\\"\\n                        [class.marked]=\\\"day.marked\\\"\\n                        [class.last-month-day]=\\\"day.isLastMonth\\\"\\n                        [class.next-month-day]=\\\"day.isNextMonth\\\"\\n                        [class.on-selected]=\\\"isSelected(day.time)\\\"\\n                        [disabled]=\\\"day.disable\\\">\\n                  <p>{{day.title}}</p>\\n                  <small *ngIf=\\\"day.subTitle\\\">{{day?.subTitle}}</small>\\n                </button>\\n              </ng-container>\\n            </div>\\n          </ng-template>\\n        </div>\\n      </ng-template>\\n\\n      <ng-template #rangeBox>\\n        <div class=\\\"days-box\\\">\\n          <ng-template ngFor let-day [ngForOf]=\\\"month.days\\\" [ngForTrackBy]=\\\"trackByTime\\\">\\n            <div class=\\\"days\\\"\\n                 [class.startSelection]=\\\"isStartSelection(day)\\\"\\n                 [class.endSelection]=\\\"isEndSelection(day)\\\"\\n                 [class.is-first-wrap]=\\\"day?.isFirst\\\"\\n                 [class.is-last-wrap]=\\\"day?.isLast\\\"\\n                 [class.between]=\\\"isBetween(day)\\\">\\n              <ng-container *ngIf=\\\"day\\\">\\n                <button type='button'\\n                        [class]=\\\"'days-btn ' + day.cssClass\\\"\\n                        [class.today]=\\\"day.isToday\\\"\\n                        (click)=\\\"onSelected(day)\\\"\\n                        [class.marked]=\\\"day.marked\\\"\\n                        [class.last-month-day]=\\\"day.isLastMonth\\\"\\n                        [class.next-month-day]=\\\"day.isNextMonth\\\"\\n                        [class.is-first]=\\\"day.isFirst\\\"\\n                        [class.is-last]=\\\"day.isLast\\\"\\n                        [class.on-selected]=\\\"isSelected(day.time)\\\"\\n                        [disabled]=\\\"day.disable\\\">\\n                  <p>{{day.title}}</p>\\n                  <small *ngIf=\\\"day.subTitle\\\">{{day?.subTitle}}</small>\\n                </button>\\n              </ng-container>\\n\\n            </div>\\n          </ng-template>\\n        </div>\\n      </ng-template>\\n    </div>\\n  \"\r\n        }),\r\n        __metadata(\"design:paramtypes\", [core_1.ChangeDetectorRef])\r\n    ], MonthComponent);\r\n    return MonthComponent;\r\n}());\r\nexports.MonthComponent = MonthComponent;\r\n"]}